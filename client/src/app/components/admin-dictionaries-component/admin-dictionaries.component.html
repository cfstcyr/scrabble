<div matSort>
    <div class="filter-container">
        <button mat-flat-button color="primary" (click)="resetDictionaries()" [disabled]="state !== 'ready'">RÃ©initialiser les dictionaires</button>
        <button mat-flat-button color="primary" (click)="uploadDictionary()">Ajouter un dictionaire</button>
        <mat-form-field appearance="outline" id="column-select">
            <mat-label>Colonnes du tableau</mat-label>
            <mat-select #select [formControl]="columnsControl" [(value)]="selectedColumnsItems" multiple>
                <mat-option *ngFor="let column of columnsItems" [value]="column">{{column.label}}</mat-option>
            </mat-select>
        </mat-form-field>
     </div>

    <mat-divider></mat-divider>

    <ng-container [ngSwitch]="state">
        <ng-container *ngSwitchCase="'ready'">
            <table mat-table [dataSource]="dataSource">
        
                <ng-container matColumnDef="dictionaryName">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef> {{columns.dictionaryName}} </th>
                    <td mat-cell *matCellDef="let element"> {{element.title}} </td>
                </ng-container>
       
                <ng-container matColumnDef="dictionaryDescription">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef> {{columns.dictionaryDescription}} </th>
                    <td mat-cell *matCellDef="let element"> {{element.description}} </td>
                </ng-container> 

                <ng-container matColumnDef="dictionaryActions">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef> {{columns.dictionaryActions}} </th>
                    <td mat-cell *matCellDef="let element"> 
                        <button mat-mini-fab class="mat-elevation-z0 spaced-button" color = "primary" (click)="modifyDictionary(element)">
                            <app-icon icon="pencil"></app-icon>
                        </button>
                        <button mat-mini-fab class="mat-elevation-z0 spaced-button" color = "primary" (click)="downloadDictionary(element.id)">
                            <app-icon icon="download"></app-icon>
                        </button>
                        <button mat-mini-fab class="mat-elevation-z0 spaced-button" color = "primary" (click)="deleteDictionary(element.id)" [disabled] = "element.isDefault">
                            <app-icon icon="trash"></app-icon>
                        </button> 
                    </td>
                </ng-container> 
        
                <tr mat-header-row *matHeaderRowDef="getDisplayedColumns()"></tr>
                <tr mat-row *matRowDef="let row; columns: getDisplayedColumns();"></tr>
            </table>
        </ng-container>

        <ng-container *ngSwitchCase="'loading'">
            <div class="loading-container">
                <mat-spinner></mat-spinner>
                <p>Chargement de l'historique des parties...</p>
            </div>
        </ng-container>

        <ng-container *ngSwitchCase="'error'">
            <div class="loading-container">
                <p class="error">{{ error }}</p>
            </div>
        </ng-container>
    </ng-container>
    <mat-paginator [pageSizeOptions] = "[15, 25, 50]" [ngClass]="{ visible: state === 'ready' }" showFirstLastButtons></mat-paginator>
</div>