<div matSort>
    <div class="filter-container">
        <button mat-flat-button color="primary" (click)="resetVirtualPlayers()" [disabled]="state !== 'ready'">
            Réinitialiser
            <app-icon class="icon" icon="redo"></app-icon>
        </button>
        <button mat-flat-button color="primary" (click)="createVirtualPlayer()">
            Ajouter un joueur virtuel
            <app-icon class="icon" icon="plus-circle" styling="solid" size="lg"></app-icon>
        </button>
     </div>

    <mat-divider></mat-divider>

    <ng-container [ngSwitch]="state">
        <ng-container *ngSwitchCase="'ready'">
            <table mat-table [dataSource]="dataSource">
        
                <ng-container matColumnDef="name">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef> {{columns.name}} </th>
                    <td mat-cell class="left-cell" *matCellDef="let element"> {{element.name}} </td>
                </ng-container>
       
                <ng-container matColumnDef="level">
                    <th mat-header-cell mat-sort-header *matHeaderCellDef> {{columns.level}} </th>
                    <td mat-cell class="left-cell" *matCellDef="let element"> {{element.level}} </td>
                </ng-container> 

                <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef> {{columns.actions}} </th>
                    <td mat-cell class="right-cell" *matCellDef="let element"> 
                        <button matTooltip="Vous ne pouvez pas modifier un joueur virtuel par défaut." [matTooltipDisabled]="!element.isDefault" mat-mini-fab class="mat-elevation-z0 spaced-button" color = "primary" (click)="updateVirtualPlayer(element)"[disabled] = "element.isDefault">
                            <app-icon icon="pencil">
                            </app-icon>
                        </button>
                        <button matTooltip="Vous ne pouvez pas supprimer un joueur virtuel par défaut." [matTooltipDisabled]="!element.isDefault" mat-mini-fab class="mat-elevation-z0 spaced-button" color = "primary" (click)="deleteVirtualPlayer(element)" [disabled] = "element.isDefault">
                            <app-icon icon="trash-alt">
                            </app-icon>
                        </button> 
                    </td>
                </ng-container> 
        
                <tr mat-header-row *matHeaderRowDef="getDisplayedColumns()"></tr>
                <tr mat-row *matRowDef="let row; columns: getDisplayedColumns();"></tr>
            </table>
        </ng-container>

        <ng-container *ngSwitchCase="'loading'">
            <div class="loading-container">
                <mat-spinner></mat-spinner>
                <p>Chargement des dictionnaires...</p>
            </div>
        </ng-container>

        <ng-container *ngSwitchCase="'error'">
            <div class="loading-container">
                <p class="error">{{ error }}</p>
            </div>
        </ng-container>
    </ng-container>
    <mat-progress-bar *ngIf="isWaitingForServerResponse" mode="indeterminate"></mat-progress-bar>
    <mat-paginator [pageSizeOptions] = "[15, 25, 50]" [ngClass]="{ visible: state === 'ready' }" showFirstLastButtons></mat-paginator>
</div>